# Lecture 13: MapReduce and Hadoop
## Refinements
#### Terms:
- **Partitioning function** - Partitions data; default: `hash(key) mod R`
  - Users specify `R`, the number of output files
  - If output keys are URLs, entries from a host must go to same output file: `hash(Hostname(urlkey)) mod R`
- **Combiner function** - Does partial merging of the data before it is sent to reducer
  - Executes on each machine performing a map task
  - Code implementing combiner & reduce function is usually the same
  - Output written to intermediate file
- **Signal handler** - Each worker has a signal handler to catch segmentation violations and bus errors
  - When running into an error, signal handler sends last gasp UDP packer to Master. If Master recognizes more than one failure, the record is skipped during the next iteration.
#### Concepts:
- Intermediate key/pairs are processed in increasing order: easier to generate sorted output file
- **Combine:** - Output written to intermediate file
- **Reduce:** - Output written to final output file
- Text mode treats every line as a `<key, value>` pair
  - Key: offset in the file
  - Value: contents of the line
  - `<key, value>` pairs are sorted by key
  - Text splitting occurs only at line boundaries
- Besides intermediate files, other auxiliary files may be produced (side-effects)
  - No atomic commits for multiple auxiliary files that are produced
- Skipping Bad Records
  - Bugs in user code may cause Map or Reduce functions to crash; however, it is not always feasible to fix them.
  - Optional mode of operation: detect records that cause deterministic crashes and skip them.
  - If a machine fails more than once, it is skipped for the next iteration.
- Local Execution
  - Support for sequential execution of MapReduce operations on a single machine.
  - Controls to limit computation to a particular map
  - Invoke programs with a special flag: use debugging and nesting tools
